version: "3.9"

services:
  telegram-dashboard:
    build: .
    container_name: telegram_dashboard
    restart: unless-stopped

    environment:
      HOST: ${HOST}
      PORT: ${PORT}
      LOG_LEVEL: ${LOG_LEVEL}
      MAIN_SERVICE_URL: ${MAIN_SERVICE_URL}
      TELEGRAM_SECRET_KEY_SERVICE: ${TELEGRAM_SECRET_KEY_SERVICE}
      WEBHOOK_SECRET: ${WEBHOOK_SECRET}
      SQLITE_DB_PATH: ${SQLITE_DB_PATH}
      DB_MIGRATE: ${DB_MIGRATE}

    ports:
      - "8085:8085"

    volumes:
      - ./data:/app/data:rw

    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8085/"]
      interval: 30s
      timeout: 10s
      retries: 3
